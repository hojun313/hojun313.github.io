---
layout: default
title: "Tags"
---

<style>
  body {
    background-color: #121212;
    color: #E0E0E0;
  }
  .tag-sort-options {
    text-align: center;
    margin-bottom: 20px;
  }
  .tag-sort-options button {
    background-color: #333;
    color: #E0E0E0;
    border: 1px solid #555;
    padding: 8px 15px;
    margin: 0 5px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
  }
  .tag-sort-options button.active {
    background-color: #BB86FC;
    color: #121212;
    border-color: #BB86FC;
  }
  .tag-cloud {
    padding: 20px 0;
    text-align: center;
  }
  .tag-cloud a {
    display: inline-block;
    padding: 5px 12px;
    margin: 5px;
    background-color: #333;
    border-radius: 15px;
    text-decoration: none;
    color: #BB86FC;
    font-size: 1em;
    transition: all 0.2s ease-in-out;
  }
  .tag-cloud a:hover, .tag-active {
    background-color: #BB86FC;
    color: #121212;
    transform: scale(1.1);
  }
  #tag-name {
    margin-top: 30px;
    padding-bottom: 10px;
    border-bottom: 2px solid #333;
    color: #FFFFFF;
  }
  .post-list-by-tag {
    list-style: none;
    padding: 0;
  }
  .post-list-by-tag li {
    padding: 15px 0;
    border-bottom: 1px solid #333;
  }
  .post-list-by-tag a {
    text-decoration: none;
    color: #E0E0E0;
    font-size: 1.2em;
    transition: color 0.2s ease-in-out;
  }
  .post-list-by-tag a:hover {
    color: #BB86FC;
  }
  .post-list-by-tag .post-date {
    display: block;
    color: #A0A0A0;
    font-size: 0.9em;
    margin-top: 5px;
  }
</style>

<div class="tag-sort-options">
  <button id="sort-alpha" class="active">가나다순</button>
  <button id="sort-count">많은순</button>
</div>

<h2 id="tag-name"></h2>
<ul id="post-list" class="post-list-by-tag">
</ul>

<div id="tag-cloud-container" class="tag-cloud">
  <!-- Tags will be injected here by JavaScript -->
</div>

<script>
  // Data loaded from Jekyll
  const allTags = [
      {% for tag in site.tags %}
          {
              "name": {{ tag[0] | jsonify }},
              "size": {{ tag[1].size }},
              "url_hash": "#{{ tag[0] | url_encode }}"
          },
      {% endfor %}
  ];

  const posts = [
    {% for post in site.posts %}
    {
      "title": {{ post.title | jsonify }},
      "url": "{{ site.baseurl }}{{ post.url }}",
      "date": "{{ post.date | date: '%Y-%m-%d' }}",
      "tags": {{ post.tags | jsonify }}
    },
    {% endfor %}
  ];

  // DOM Elements
  const sortAlphaButton = document.getElementById('sort-alpha');
  const sortCountButton = document.getElementById('sort-count');
  const tagCloudContainer = document.getElementById('tag-cloud-container');
  const postList = document.getElementById('post-list');
  const tagNameHeader = document.getElementById('tag-name');

  // --- Tag Highlighting ---
  function updateActiveTag() {
    const currentHash = window.location.hash;
    document.querySelectorAll('#tag-cloud-container a').forEach(tagLink => {
      if (tagLink.hash === currentHash) {
        tagLink.classList.add('tag-active');
      } else {
        tagLink.classList.remove('tag-active');
      }
    });
  }

  // --- Tag Sorting and Rendering ---
  function renderTagCloud(tags) {
    tagCloudContainer.innerHTML = '<h2>Tags</h2>'; // Add title back
    tags.forEach(tag => {
      const tagLink = document.createElement('a');
      tagLink.href = tag.url_hash;
      tagLink.innerText = `${tag.name} (${tag.size})`;
      tagCloudContainer.appendChild(tagLink);
    });
    updateActiveTag(); // Re-apply active class after re-rendering
  }

  sortAlphaButton.addEventListener('click', () => {
    allTags.sort((a, b) => a.name.localeCompare(b.name, 'ko'));
    renderTagCloud(allTags);
    sortAlphaButton.classList.add('active');
    sortCountButton.classList.remove('active');
  });

  sortCountButton.addEventListener('click', () => {
    allTags.sort((a, b) => b.size - a.size);
    renderTagCloud(allTags);
    sortCountButton.classList.add('active');
    sortAlphaButton.classList.remove('active');
  });

  // --- Post Filtering by Tag ---
  function updatePostList() {
    const hash = window.location.hash.substring(1);
    const tagName = decodeURIComponent(hash || '').replace(/\+/g, ' ');
    
    updateActiveTag();

    if (!tagName) {
      tagNameHeader.innerText = '모든 태그';
      postList.innerHTML = '<li>아래의 태그를 선택하여 글을 필터링하세요.</li>';
      return;
    }

    tagNameHeader.innerText = `태그: #${tagName}`;
    const filteredPosts = posts.filter(post => post.tags.includes(tagName));
    
    let html = '';
    if (filteredPosts.length > 0) {
      filteredPosts.forEach(post => {
        html += `
          <li>
            <a href="${post.url}">${post.title}</a>
            <span class="post-date">${post.date}</span>
          </li>
        `;
      });
    } else {
      html = '<li>이 태그에 해당하는 글이 없습니다.</li>';
    }
    postList.innerHTML = html;
  }

  // --- Initial Load ---
  window.addEventListener('hashchange', updatePostList);
  document.addEventListener('DOMContentLoaded', () => {
    // Initial sort and render
    allTags.sort((a, b) => a.name.localeCompare(b.name, 'ko'));
    renderTagCloud(allTags);
    // Initial post list render
    updatePostList();
  });

</script>
